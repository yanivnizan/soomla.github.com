<!doctype html>
<html xmlns:fb="http://ogp.me/ns/fb#">
  <head>
      <link rel="shortcut icon" href="http://i49.tinypic.com/dpk4ue.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>android-store by Soomla</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33649002-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>

<div id="fb-root"></div>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=409611972431183";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


    <div class="wrapper">
<header>
        <h1>android-store</h1>

        <p>In-App Billing Library for Android:</p>
		<ul class="info">
            <li>Simplifies the Google Play API</li>
            <li>Storage for currency/goods balances</li>
            <li>Improved security</li>
            <li>Event handling</li>
            <li>Sample App for reference</li>
		</ul>

        <p class="view"><a href="https://github.com/soomla/android-store">View the Project on GitHub <small>soomla/android-store</small></a></p>


        <ul class="actions">
          <li><a href="https://github.com/soomla/android-store/zipball/master" onclick="_gaq.push(['_trackEvent', 'immediate_goals', 'android_code_download', 'Someone wants our ZIP !']);">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/soomla/android-store/tarball/master" onclick="_gaq.push(['_trackEvent', 'immediate_goals', 'android_code_download', 'Someone wants our TAR !']);">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/soomla/android-store" onclick="_gaq.push(['_trackEvent', 'immediate_goals', 'android_project_view', 'Someone wants to view our project !']);">View On <strong>GitHub</strong></a></li>
        </ul>
        <p>
            &nbsp;</p><p></p><h1>More Projects</h1><p>
          Coming Soon...
        </p>

        <table border="0">
            <tbody>
            <tr>
                <td>
                    <fb:like href="https://www.facebook.com/The.SOOMLA.Project" send="true" layout="box_count" width="250"
                             show_faces="false" font="tahoma" class="fb_edge_widget_with_comment fb_iframe_widget"><span
                            style="height: 86px; width: 50px; "><iframe id="f3420ba1f4" name="f6a0a55a4" scrolling="no"
                                                                        style="border: none; overflow: hidden; height: 86px; width: 50px; "
                                                                        title="Like this content on Facebook."
                                                                        class="fb_ltr"
                                                                        src="http://www.facebook.com/plugins/like.php?api_key=409611972431183&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df9cf5afb4%26origin%3Dhttp%253A%252F%252Fproject.soom.la%252Ff1837af578%26domain%3Dproject.soom.la%26relation%3Dparent.parent&amp;extended_social_context=false&amp;font=tahoma&amp;href=https%3A%2F%2Fwww.facebook.com%2FThe.SOOMLA.Project&amp;layout=box_count&amp;locale=en_US&amp;node_type=link&amp;sdk=joey&amp;send=true&amp;show_faces=false&amp;width=250"></iframe></span>
                    </fb:like>
                </td>
                <td style="vertical-align:top"><span style="color: black; font-weight: bold;">SUBSCRIBE TO UPDATES ON FACEBOOK</span>
                </td>
            </tr>
            </tbody>
        </table>

    <p></p>


</header>
<section>
<a href="https://github.com/soomla/android-store"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
        <p><img src="https://dl.dropbox.com/u/88676957/SoomlaLogo_BlueLogo.png" alt="SOOMLA LOGO"></p>

<h2>Welcome to The SOOMLA Project</h2>

<p>The SOOMLA Project is a series of open source initiatives with a joint goal to help mobile game developers get better stores and more in-app purchases. We are openly coding the following initiatives:
    <ul>
        <li>Platform specific projects that provide developers with a complete in-app purchasing stack and includes: storage of virtual items, purchasing sequences with the various marketplaces and a sample app for reference.</li>
        <li>Customizable templates and themes which allows developers to leverage our work and quickly set up the store front based on pre-optimized and user intuitive layouts.</li>
        <li>A Server side project that builds on top of the two other projects and boosts in-app commerce with analytics, dynamic storefronts, user management, optimization algorithms and much more.</li>
    </ul>
</p>

<h2>android-store</h2>

<p>The android-store is our the first open code initiative as part of The SOOMLA Project. It is a Java API that simplifies Google Play's in-app purchasing API and complements it with storage, security and event handling. The project also includes a sample app for reference.</p>

<p>Check out our <a href="https://github.com/soomla/android-store/wiki">Wiki</a> for more information about the project and how to use it better.</p>

<h2>Getting Started</h2>

<ul>
<li>Before doing anything, SOOMLA recommends that you go through <a href="http://developer.android.com/guide/google/play/billing/index.html">Android In-app Billing</a>.</li>
</ul><ol>
<li>
<p>Clone android-store. Copy all files from android-store's subfolders to their equivallent folders in your Android project:</p>

<p><code>git clone git@github.com:soomla/android-store.git</code></p>
</li>
<li>
<p>Make the folowing changes to your AndroidManifest.xml:</p>

<p>Add the following permission:</p>

<div class="highlight"><pre>  <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"com.android.vending.BILLING"</span> <span class="nt">/&gt;</span>
</pre></div>

<p>Add the following code to your 'application' element:</p>

<div class="highlight"><pre>  <span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"com.soomla.billing.BillingService"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">"com.soomla.billing.BillingReceiver"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;intent-filter&gt;</span>
          <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.android.vending.billing.IN_APP_NOTIFY"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.android.vending.billing.RESPONSE_CODE"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.android.vending.billing.PURCHASE_STATE_CHANGED"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/intent-filter&gt;</span>
  <span class="nt">&lt;/receiver&gt;</span>
  <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">"com.soomla.store.StoreActivity"</span> <span class="nt">/&gt;</span>
</pre></div>
</li>
<li>
<p>Create your own implementation of <em>IStoreAssets</em> in order to describe your specific game's assets. Initialize <em>StoreController</em> with the class you just created:</p>

<div class="highlight"><pre>   <span class="n">StoreController</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">initialize</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span>
                                       <span class="k">new</span> <span class="nf">YourStoreAssetsImplementation</span><span class="o">(),</span>
                                       <span class="s">"YOUR PUBLIC KEY FROM GOOGLE PLAY"</span><span class="o">,</span>
                                       <span class="kc">false</span><span class="o">);</span>
</pre></div>
</li>
</ol><p>And that's it ! You have Storage and in-app purchesing capabilities... ALL-IN-ONE.</p>

<h2>Storage &amp; Meta-Data</h2>

<p>When you initialize <em>StoreController</em>, it automatically initializes two other classed: StorageManager and StoreInfo. <em>StorageManager</em> is the father of all stoaage related instances in your game. Use it to access tha balances of virtual currencies and virtual goods (ususally, using their itemIds). <em>StoreInfo</em> is the mother of all meta data information about your specific game. It is initialized with your implementation of IStoreAssets and you can use it to retrieve information about your specific game.</p>

<p>The on-device storage is encrypted and kept in a SQLite database. SOOMLA is preparing a cloud-based storage service that'll allow this SQLite to be synced to a cloud-based repository that you'll define. Stay tuned... this is just one of the goodies we prepare for you.</p>

<p><strong>Example Usages</strong></p>

<ul>
<li>
<p>Add 10 coins to the virtual currency with itemId "currency_coin":</p>

<div class="highlight"><pre><span class="n">VirtualCurrency</span> <span class="n">coin</span> <span class="o">=</span> <span class="n">StoreInfo</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getVirtualCurrencyByItemId</span><span class="o">(</span><span class="s">"currency_coin"</span><span class="o">);</span>
<span class="n">StorageManager</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getVirtualCurrencyStorage</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">coin</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
</pre></div>
</li>
<li>
<p>Remove 10 virtual goods with itemId "green_hat":</p>

<div class="highlight"><pre><span class="n">VirtualGood</span> <span class="n">greenHat</span> <span class="o">=</span> <span class="n">StoreInfo</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getVirtualGoodByItemId</span><span class="o">(</span><span class="s">"green_hat"</span><span class="o">);</span>
<span class="n">StorageManager</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getVirtualGoodsStorage</span><span class="o">().</span><span class="na">remove</span><span class="o">(</span><span class="n">greenHat</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
</pre></div>
</li>
<li>
<p>Get the current balance of green hats (virtual goods with itemId "green_hat"):</p>

<div class="highlight"><pre><span class="n">VirtualGood</span> <span class="n">greenHat</span> <span class="o">=</span> <span class="n">StoreInfo</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getVirtualGoodByItemId</span><span class="o">(</span><span class="s">"green_hat"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">greenHatsBalance</span> <span class="o">=</span> <span class="n">StorageManager</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getVirtualGoodsStorage</span><span class="o">().</span><span class="na">getBalance</span><span class="o">(</span><span class="n">greenHat</span><span class="o">);</span>
</pre></div>
</li>
</ul><h2>Security</h2>

<p>If you want to protect your application from 'bad people' (and who doesn't?!), you might want to follow some guidelines:</p>

<ul>
<li>SOOMLA keeps the game's data in an encrypted database. In order to encrypt your data, SOOMLA generates a private key out of several parts of information. StoreInfo.customSecret is one of them. SOOMLA recommends that you change this value before you release your game. BE CAREFUL: You can always change this value once! If you try to change it again, old data from the database will become unavailable.</li>
<li>Following Google's recommendation, SOOMLA also recommends that you split your public key and construct it on runtime or even use bit manipulation on it in order to hide it. The key itself is not secret information but if someone replaces it, your application might get fake messages that might harm it.</li>
</ul><h2>Event Handling</h2>

<p>SOOMLA lets you create your own event handler and add it to StoreEventHandlers. That way you'll be able to get notifications on various events and implement your own application specific behaviour to those events.</p>

<p>NOTE: Your behaviour is an addition to the default behaviour implemented by SOOMLA. You don't replace SOOMLA's behaviour.</p>

<p>In order to create your event handler:</p>

<ol>
<li>create a class that implements IStoreEventHandler.</li>
<li>Add the created class to StoreEventHandlers:
<code>StoreEventHandlers.getInstance().addEventHandler(new YourEventHandler());</code>
</li>
</ol><h2>Contribution</h2>

<p>We want you!</p>

<p>Fork -&gt; Clone -&gt; Implement -&gt; Test -&gt; Pull-Request. We have great RESPECT for contributors.</p>

<h2>SOOMLA, Elsewhere ...</h2>

<ul>
<li><a href="http://www.soom.la/">Website</a></li>
<li>
<a href="http://www.facebook.com/The.SOOMLA.Project">On Facebook</a>.</li>
<li><a href="https://angel.co/the-soomla-project">On AngelList</a></li>
</ul><h2>License</h2>

<p>MIT License. Copyright (c) 2012 SOOMLA. <a href="http://project.soom.la">http://project.soom.la</a></p>

<ul>
<li><a href="http://www.opensource.org/licenses/MIT">http://www.opensource.org/licenses/MIT</a></li>
</ul>
      </section>
      <footer>
      </footer>
    </div>

  </body>
</html>
